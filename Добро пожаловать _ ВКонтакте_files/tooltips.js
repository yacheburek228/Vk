var tooltips={show:function(el,options){if(window.AudioPage&&window.AudioPage.forceFix&&window.AudioPage.forceFix(),el.hidetimer)return el.hidetimer&&clearTimeout(el.hidetimer),void(el.hidetimer=0);if(el.tt){if(el.tt.shown=!1,el.ttimer&&clearTimeout(el.ttimer),isFunction(options.text)){var tt_text=domByClass(el.tt.container,"tt_text");if(tt_text){var text=options.text();if(!text)return;tt_text.innerHTML=text}}var opts=extend(el.tt.opts?clone(el.tt.opts):{},options||{}),isNewTT=void 0!==opts.dir;if(!el.tt.el)return el.tt="show",void(el.ttimer=setTimeout(function(){if(el.tt.el)return opts.showdt=0,void tooltips.show(el,opts);el.tt="shownow"},opts.showdt||0));var canshow=!opts.js||!1!==eval("(function(){return function(){var tip=this;"+opts.js+"};})()").apply(el.tt);canshow&&(isVisible(el.tt.container)?el.tt.showing||animate(el.tt.container,{opacity:1},void 0!==opts.showsp?opts.showsp:200):el.ttimer=setTimeout(function(){var t=el.tt.container;if(!isVisible(t)){var e=opts.forcexy?opts.forcexy:getXY(el),o=opts.forcesize?opts.forcesize:getSize(el,!1,!0),i=opts.toup,s=vk.rtl&&!opts.asrtl||opts.asrtl&&!vk.rtl,n=ge("page_header_wrap")&&isAncestor(el,"page_layout")?getSize("page_header_wrap"):ge("ads-app-header")?getSize("ads-app-header"):[0,0];if(o[0]||o[1]){t.style.opacity=0,opts.width&&(t.style.width=opts.width+"px"),opts.maxWidth&&(t.style["max-width"]=opts.maxWidth+"px"),show(t),isNewTT||(t.firstChild.className="toup"+(opts.toup?1:""));var l=opts.shift;isFunction(l)&&(l=l()),void 0!==l&&2==l.length&&l.push(l[1]);var d=domPN(t),r=bodyNode.scrollTop||htmlNode.scrollTop||0,a=getSize(t),p=e[1]-a[1]-l[1]-n[1]-r,c=lastWindowHeight-(e[1]+o[1]+a[1]+l[2])+r,h=p<0,u=c<0,v=p<0;h&&u?(c<p&&0<p+r&&(v=!(i=!0)),i&&v?i=!1:i||!u||v||(i=!0)):i&&h?i=!1:i||!u||h||(i=!0);var f=opts.needLeft||(opts.black||opts.checkLeft)&&window.lastWindowWidth&&lastWindowWidth-(e[0]+(s?o[0]+l[0]:a[0]-l[0]))<1,w="";opts.forceright&&(f=0),opts.forcetodown&&(i=!1),opts.forcetoup&&(i=!0),isNewTT?(removeClass(t,"tt_up"),removeClass(t,"tt_down"),w=opts.dir&&inArray(opts.dir,["up","down","left","right"])?"tt_"+opts.dir:"tt_"+(i?"down":"up"),addClass(t,w),toggleClass(t,"toleft",!!f),a=getSize(t)):(w="toup"+(i?1:""),i==opts.toup&&!f||(w+=f?" toleft":"",a=getSize(t)),t.firstChild.className=w,addClass(t,i?"tt_toup":""));var m,x=getXY(d);if(e[0]-=x[0]-d.scrollLeft,e[1]-=x[1]-d.scrollTop,el.tt.zIndexEls=[],!opts.noZIndex)for(;d&&d!=bodyNode&&!hasClass(d,"scroll_fix");){var g=intval(getStyle(d,"zIndex")),_=intval(d.ttCount);if(g&&!_)break;setStyle(d,"zIndex",opts.zIndex||100),el.tt.zIndexEls.push(d),d.ttCount=_+1,d=domPN(d)}var y=(m=isNewTT?!inArray(opts.dir,["left","right"])||opts.forcetoup||opts.forcetodown?i?e[1]-(a[1]+l[1]):e[1]+o[1]+l[2]:e[1]-Math.floor(a[1]/2)-l[1]:e[1]+(i?-(a[1]+l[1]):o[1]+l[2]))+intval(opts.slide)*(i?-1:1),C=e[0]+(s?l[0]+o[0]-a[0]:i?-l[0]:-(l[3]||l[0]));f&&(C-=(a[0]-(opts.reverseOffset||39))*(s?-1:1)),opts.center&&(addClass(t,"tocenter"),a[0]!=o[0]&&(C-=s?0:(a[0]-o[0])/2));var T=C+(s?-1:1)*intval(opts.slideX);if(opts.showIfFit&&(C+x[0]<0||C+x[0]+a[0]>lastWindowWidth||m+x[1]<0||m+x[1]+a[1]>lastWindowHeight))return hide(el.tt.container);el.tt.showing=!0,setStyle(t,{top:y,left:T});var b={opacity:1};T!=C&&(b.left=C),y!=m&&(b.top=m),animate(t,b,void 0!==opts.showsp?opts.showsp:200,function(){el.tt&&el.tt.showing&&(el.tt.showing=!1),opts.onShowEnd&&opts.onShowEnd(),el.tt&&(el.tt.shown=!0)}),opts.onShowStart&&opts.onShowStart(el.tt)}else hide(el.tt.container)}},opts.showdt||0))}},clearZindex:function(t){t.tt&&t.tt.opts&&t.tt.zIndexEls&&each(t.tt.zIndexEls,function(){var t=intval(this.ttCount);t<=1?(setStyle(this,"zIndex",""),this.ttCount=0):this.ttCount=t-1})},hide:function(e,o){if("shownow"!==e.tt){if(e.tt&&(e.tt.shown=!1),(o||{}).fasthide)return clearTimeout(e.hidetimer),clearTimeout(e.ttimer),e.hidetimer=0,e.tt&&e.tt.el&&hide(e.tt.container),void tooltips.clearZindex(e);e.hidetimer||(e.hidetimer=setTimeout(function(){if(e.hidetimer=0,clearTimeout(e.ttimer),!e.tt||"hide"==e.tt||e.tt.el&&!isVisible(e.tt.container))return e.tt&&e.tt.el&&hide(e.tt.container),void tooltips.clearZindex(e);var t=extend(e.tt.opts?clone(e.tt.opts):{},o||{});e.tt.el?e.ttimer=setTimeout(function(){t.hasover||setStyle(e.tt.container,{pointerEvents:"none"}),fadeOut(e.tt.container,void 0!==t.showsp?t.showsp:200,function(){e.tt&&e.tt.container&&setStyle(e.tt.container,{pointerEvents:"auto"}),tooltips.clearZindex(e)}),t.onHide&&t.onHide()},t.hidedt||0):e.tt="hide"},1))}},hideAll:function(t){if(cur.tooltips)for(var e=0;e<cur.tooltips.length;++e){var o=cur.tooltips[e];t&&!isAncestor(o.el,t)||o.opts.forceNoHide||(o.el&&o.el.ttimer&&clearTimeout(o.el.ttimer),o.hide({fasthide:!0}))}},rePositionTT:function(t){if(t){var e=t.opts,o=t.el,i=t.container,s=getXY(o),n=getSize(o,!1,!0);if(n[0]||n[1]){var l=getSize(i),d=e.needLeft||e.black&&lastWindowWidth&&lastWindowWidth-(s[0]+l[0])<1,r=hasClass(i.firstChild,"toup1")||e.toup||hasClass(i,"tt_down"),a=e.shift,p=vk.rtl&&!e.asrtl||e.asrtl&&!vk.rtl;isFunction(a)&&(a=a());var c=getXY(domPN(i));s[0]-=c[0],s[1]-=c[1];var h=s[0]+(p?a[0]+n[0]-l[0]:r?-a[0]:-(a[3]||a[0]));d&&(h-=l[0]-39),e.center&&l[0]!=n[0]&&(h-=(l[0]-n[0])/2);var u=s[1]+(r?-(l[1]+a[1]):n[1]+a[2]);setStyle(i,{left:h,top:u})}}},rePositionAll:function(){if(cur.tooltips)for(var t=0;t<cur.tooltips.length;++t){var e=cur.tooltips[t].opts;e&&(e.nohideover||e.nohide)&&tooltips.rePositionTT(cur.tooltips[t])}},destroy:function(t){if(t){if(clearTimeout(t.ttimer),clearTimeout(t.hidetimer),t.tt&&t.tt.el){if(t.tt.onClean&&t.tt.onClean(),cleanElems(t.tt.container),removeEvent(t,"mouseout",t.tthide),removeEvent(t,"click",t.tthide),removeEvent(window,"scroll",t.tthide),removeEvent(document,"click",t.tthide),t.tt.container){var e=domPN(t.tt.container);e&&e.removeChild(t.tt.container)}tooltips.clearZindex(t),t.tt.el=!1}removeAttr(t,"tt","tthide","ttimer","hidetimer")}},destroyAll:function(t){if(cur.tooltips){for(var e=0;e<cur.tooltips.length;++e)t&&!isAncestor(cur.tooltips[e].el,t)||cur.tooltips[e].destroy();t||delete cur.tooltips}},create:function(s,t){void 0!==t.shift&&2==t.shift.length&&t.shift.push(t.shift[1]);var n=extend({shift:t.black?[11,8,8]:void 0!==t.dir?[2,8,8]:[2,3,3],toup:!0},t);t.black&&!n.dir&&(n.dir="auto",n.typeClass="tt_black"),s.tthide||(s.tthide=tooltips.hide.pbind(s),t.nohide||(addEvent(s,"mouseout",s.tthide),addEvent(s,"click",s.tthide),addEvent(window,"scroll",s.tthide),t.hasover||addEvent(document,"click",s.tthide)));var e=n.no_shadow?" tt_no_shadow":"";if(!n.content){if(s.tt&&!n.force)return s.hidetimer?(clearTimeout(s.hidetimer),void(s.hidetimer=0)):void 0;if(!n.text){if(!n.url)return;return clearTimeout(s.ttimer),void(s.ttimer=setTimeout(function(){s.tt="show",ajax.post(n.url,n.params||{},{onDone:function(t,e){var o=s.tt,i=clone(n);extend(i,{content:t||"",js:e}),tooltips.create(s,i),"shownow"==o&&tooltips.show(s,extend(i,{showdt:0}))},onFail:function(){return!0},cache:n.cache||0}),tooltips.show(s,n)},n.ajaxdt||0))}n.content='<div class="tt_text">'+(isFunction(n.text)?n.text():n.text)+"</div>"}if(void 0!==n.dir)var o="tt_w";else o="tt";var i=o+" "+(void 0!==n.dir?n.typeClass||"tt_default":"")+" "+(n.className||"");if(s.tt&&s.tt.el){var l=s.tt.container;s.tt.onClean&&s.tt.onClean(),geByClass1("wrapped",l).innerHTML=n.content,extend(s.tt,{opts:n,show:tooltips.show.pbind(s,t)}),l.className=i,hide(l)}else{if(n.black)var d=ce("div",{innerHTML:n.content,className:i},{display:"none"});else if(void 0!==n.dir)d=ce("div",{innerHTML:'<div class="wrapped">'+n.content+"</div>",className:i+e},{display:"none"});else d=ce("div",{innerHTML:'<table cellspacing="0" cellpadding="0">    <tr><td colspan="3" class="tt_top"><div class="top_pointer"></div></td></tr>    <tr>      <td class="side_sh"></td>      <td class="outer"><table cellspacing="0" cellpadding="0">        <tr><td class="side_sh"></td>          <td class="wrapped">'+n.content+'</td>        <td class="side_sh"></td></tr>        <tr><td colspan="3"><div class="bottom_sh"></div></td></tr>      </table></td>      <td class="side_sh"></td>    </tr>    <tr><td colspan="3" class="tt_bottom"><div class="bottom_sh"></div><div class="bottom_pointer'+e+'"></div></td></tr>  </table>',className:i},{display:"none"});var r=domPN(s);if(t.appendEl)r=t.appendEl;else if(t.appendParentCls)r=domClosest(t.appendParentCls,r);else if(!(r=domClosest("tt_w",r)||domClosest("tt_default",r)))for(;r=domClosestPositioned(r||s,{noOverflow:!0}),hasClass(r,"tt_noappend"););(r=r||bodyNode).appendChild(d);var a=extend({el:s,opts:n,show:tooltips.show.pbind(s,t),hide:s.tthide,destroy:tooltips.destroy.pbind(s),container:d},n.tip||{});n.nohideover||n.text&&!n.hasover||(addEvent(d,"mouseover",a.show),addEvent(d,"mouseout",a.hide)),removeClass(a.container,"fixed"),setStyle(a.container,{position:"absolute"}),s.tt=a,cur.tooltips||(cur.tooltips=[]),cur.tooltips.push(a)}n.init&&n.init(a)},addAudio:function(t,e,o,i){ajax.post("audio.php",{act:"a_add",oid:e,aid:o,hash:i},{onDone:function(){t.parentNode.replaceChild(ce("div",{className:"fl_r add_audio_plus done"}),t)},onFail:function(){return!0},showProgress:function(){hide(t.nextSibling),show(t.previousSibling)},hideProgress:function(){hide(t.previousSibling),show(t.nextSibling)}})}};try{stManager.done("tooltips.js")}catch(t){}